#include "stb_ds.h"
#include "models.h"
#include "scene.h"

// Draw a model with extended parameters, will need to pass boneids and weights
void entity_draw_actor(Model *model, int team)
{

    // Combine model transformation matrix (model.transform) with matrix generated by function parameters (matTransform)
    for (int i = 0; i < model->meshCount; i++)
    {
        Color color = model->materials[model->meshMaterial[i]].maps[MATERIAL_MAP_DIFFUSE].color;

        Color color_tint = WHITE;
        if (team == GAME_TEAM_PLAYER)
        {
            color_tint = GREEN;
        }
        else if (team == GAME_TEAM_AI)
        {
            color_tint = RED;
        }

        model->materials[model->meshMaterial[i]].maps[MATERIAL_MAP_DIFFUSE].color = color_tint;
        DrawMesh(model->meshes[i], model->materials[model->meshMaterial[i]], model->transform);
        model->materials[model->meshMaterial[i]].maps[MATERIAL_MAP_DIFFUSE].color = color;
    }
}
